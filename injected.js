!function(){"use strict";let e;const t=[];function n(t,n){if(!e?.skip_old||"g"!=n.data[0])return t.call(this,n)}window.addEventListener("message",(n=>{if(!Array.isArray(n.data)||n.data.length<1)return;let[o,...r]=n.data;if("set-all"!=o)return console.warn("Unknown command",o);e=JSON.parse(r[0]),t.forEach((e=>e()))})),window.parent.postMessage(["get-all"]),WebSocket=new Proxy(WebSocket,{construct(t,o){let r=new t(...o);return r.addEventListener("close",(()=>{e?.auto_reload&&window.top.document.location.reload()})),Object.defineProperty(r,"onmessage",{set:e=>r.addEventListener("message",n.bind(r,e))}),r}});const o=new Promise((e=>{let t=window.parent.whiteboard.__sendStats;window.parent.whiteboard.__sendStats=function(n,o){return"end"==o&&function(e){let t=Object.entries(window),n=t.filter((([e,t])=>"function"==typeof t&&!t.toString().includes("[native code]")));e({all:t,functions:n})}(e),t.apply(this,arguments)}}));o.then((e=>{const t="$wnd.alert("+e.all.find((([e,t])=>"Copy command and image upload are currently disabled."==t))[0]+")";let n=e.functions.filter((([e,n])=>n.toString().includes(t)));for(const[e,o]of n){const n=o.toString(),r=n.indexOf(t);window[e]=new Function("return "+n.substring(0,r)+n.substring(r).replace("return","").replace(t,""))()}}))}();
